import{W as u,al as x,af as E,ae as L}from"./index-c15ef0e4.js";import{c as b}from"./components-2b8ce7a7.js";const v={locks:{},zIndex:2e3,enableRipple:!0};u(v);const m=u(v);const{n:h}=b("ripple"),d=250;function g(e){const{zIndex:t,position:s}=E(e);e.style.overflow="hidden",e.style.overflowX="hidden",e.style.overflowY="hidden",s==="static"&&(e.style.position="relative"),t==="auto"&&(e.style.zIndex="1")}function T(e,t){const{top:s,left:r}=L(e),{clientWidth:p,clientHeight:i}=e,n=Math.sqrt(p**2+i**2)/2,c=n*2,o=t.touches[0].clientX-r,l=t.touches[0].clientY-s,R=(p-n*2)/2,w=(i-n*2)/2,_=o-n,k=l-n;return{x:_,y:k,centerX:R,centerY:w,size:c}}function f(e){const t=this._ripple;if(t.removeRipple(),t.disabled||t.tasker||!m.enableRipple)return;const s=()=>{t.tasker=null;const{x:r,y:p,centerX:i,centerY:n,size:c}=T(this,e),o=document.createElement("div");o.classList.add(h()),o.style.opacity="0",o.style.transform=`translate(${r}px, ${p}px) scale3d(.3, .3, .3)`,o.style.width=`${c}px`,o.style.height=`${c}px`,t.color&&(o.style.backgroundColor=t.color),o.dataset.createdAt=String(performance.now()),g(this),this.appendChild(o),window.setTimeout(()=>{o.style.transform=`translate(${i}px, ${n}px) scale3d(1, 1, 1)`,o.style.opacity=".25"},20)};t.tasker=window.setTimeout(s,30)}function a(){const e=this._ripple,t=()=>{const s=this.querySelectorAll(`.${h()}`);if(!s.length)return;const r=s[s.length-1],p=d-performance.now()+Number(r.dataset.createdAt);window.setTimeout(()=>{r.style.opacity="0",window.setTimeout(()=>{var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)},d)},p)};e.tasker?window.setTimeout(t,30):t()}function y(){if(!x()||!m.enableRipple)return;const e=this._ripple;e.tasker&&window.clearTimeout(e.tasker),e.tasker=null}function $(e,t){e._ripple={tasker:null,...t.value??{},removeRipple:a.bind(e)},e.addEventListener("touchstart",f,{passive:!0}),e.addEventListener("touchmove",y,{passive:!0}),e.addEventListener("dragstart",a,{passive:!0}),document.addEventListener("touchend",e._ripple.removeRipple,{passive:!0}),document.addEventListener("touchcancel",e._ripple.removeRipple,{passive:!0}),document.addEventListener("dragend",e._ripple.removeRipple,{passive:!0})}function A(e){e.removeEventListener("touchstart",f),e.removeEventListener("touchmove",y),e.removeEventListener("dragstart",a),document.removeEventListener("touchend",e._ripple.removeRipple),document.removeEventListener("touchcancel",e._ripple.removeRipple),document.removeEventListener("dragend",e._ripple.removeRipple)}function I(e,t){var p,i,n,c,o,l;const s={color:(p=t.value)==null?void 0:p.color,disabled:(i=t.value)==null?void 0:i.disabled};(s.color!==((n=e._ripple)==null?void 0:n.color)||s.disabled!==((c=e._ripple)==null?void 0:c.disabled))&&(e._ripple={tasker:s.disabled?null:(o=e._ripple)==null?void 0:o.tasker,removeRipple:(l=e._ripple)==null?void 0:l.removeRipple,...s})}const N={mounted:$,unmounted:A,updated:I,install(e){e.directive("ripple",this)}},X=N;export{X as v};
