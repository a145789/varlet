import{au as se,a4 as oe,av as te,d as j,D as A,aw as W,a1 as K,ax as le,_ as N,e as C,m as x,v as O,x as E,f as re,w as n,p as P,q as r,T as R,R as i,t as D,U as a,n as ne,an as F,W as de,r as z,F as ue,a6 as me,ao as ie,b as p,N as pe,Q as c,$ as ce,a0 as ge}from"./index-c15ef0e4.js";import{d as q,c as G,u as fe,w as H,a as J}from"./components-2b8ce7a7.js";import{g as ve,a as Q,b as _e,s as be}from"./elements-7fef0fbb.js";import{l as ye}from"./shared-820eba90.js";import{I as Ve}from"./index-f0ee7535.js";import{A as L}from"./appType-b44f4066.js";const X={disabled:Boolean,readonly:Boolean,scrollToError:String,scrollToErrorOffsetY:{type:[String,Number],default:0},onSubmit:q(),onReset:q()},Z=Symbol("FORM_BIND_FORM_ITEM_KEY");function Me(){const{parentProvider:s,index:l,bindParent:m}=oe(Z),d=te();return{index:l,form:s,bindForm:m?y=>{m({...y,instance:d})}:null}}function ke(){const{childProviders:s,length:l,bindChildren:m}=se(Z);return{length:l,formItems:s,bindFormItems:m}}const{name:$e,n:he}=G("form"),Ce=j({name:$e,props:X,setup(s){const l=A(()=>s.disabled),m=A(()=>s.readonly),{formItems:d,bindFormItems:_}=ke();_({disabled:l,readonly:m});function o(u){setTimeout(()=>{const g=ve(u),f=g===window?0:Q(g),k=Q(u)-f-_e(s.scrollToErrorOffsetY);be(g,{top:k,animation:ye})},300)}async function T(u){W(u);const g=await M();K(s.onSubmit,g)}function b(u){W(u),V(),K(s.onReset)}async function M(){var g;const u=await Promise.all(d.map(({validate:f})=>f()));if(s.scrollToError){const[,f]=le(u,$=>$===!1,s.scrollToError),k=f>-1;if(k){const $=(g=d[f].instance.proxy)==null?void 0:g.$el;o($)}return!k}return u.every(f=>f===!0)}function V(){return d.forEach(({reset:u})=>u())}function v(){return d.forEach(({resetValidation:u})=>u())}return{n:he,handleSubmit:T,handleReset:b,validate:M,reset:V,resetValidation:v}}});function Te(s,l,m,d,_,y){return C(),x("form",{class:E(s.n()),onSubmit:l[0]||(l[0]=(...o)=>s.handleSubmit&&s.handleSubmit(...o)),onReset:l[1]||(l[1]=(...o)=>s.handleReset&&s.handleReset(...o))},[O(s.$slots,"default")],34)}const S=N(Ce,[["render",Te]]);S.useValidation=fe;S.useForm=Me;H(S);J(S,X);const ee={errorMessage:{type:String,default:""},extraMessage:{type:String,default:""}},{name:xe,n:Fe}=G("form-details"),Ue=j({name:xe,props:ee,setup:()=>({n:Fe})});const we={key:0},Ee={key:0};function Se(s,l,m,d,_,y){return C(),re(R,{name:s.n()},{default:n(()=>[s.errorMessage||s.extraMessage||s.$slots["extra-message"]?(C(),x("div",{key:0,class:E(s.n())},[P("div",{class:E(s.n("error-message"))},[r(R,{name:s.n("message")},{default:n(()=>[s.errorMessage?(C(),x("div",we,i(s.errorMessage),1)):D("",!0)]),_:1},8,["name"])],2),P("div",{class:E(s.n("extra-message"))},[r(R,{name:s.n("message")},{default:n(()=>[O(s.$slots,"extra-message",{},()=>[s.extraMessage?(C(),x("div",Ee,i(s.extraMessage),1)):D("",!0)])]),_:3},8,["name"])],2)],2)):D("",!0)]),_:3},8,["name"])}const Y=N(Ue,[["render",Se]]);H(Y);J(Y,ee);const Ie={__name:"CustomFormComponent",props:{modelValue:{type:Boolean},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},rules:{type:Array},validateTrigger:{type:Array,default:()=>["onToggle"]},extraMessage:{type:String}},emits:["update:modelValue"],setup(s,{expose:l,emit:m}){const d=s,{useForm:_,useValidation:y}=S,{errorMessage:o,validateWithTrigger:T,validate:b,resetValidation:M}=y(),{bindForm:V,form:v}=_(),u=()=>b(d.rules,d.modelValue);function g(){m("update:modelValue",!1),M()}function f(U){ne(()=>{const{validateTrigger:I,rules:h,modelValue:B}=d;T(I,U,h,B)})}function k(){d.readonly||d.disabled||v!=null&&v.readonly.value||v!=null&&v.disabled.value||(m("update:modelValue",!d.modelValue),f("onToggle"))}const $={reset:g,validate:u,resetValidation:M};return l($),V==null||V($),(U,I)=>{var h;return C(),x("div",{class:E(["var-custom-form-component",{"var-custom-form-component--disabled":s.disabled||((h=a(v))==null?void 0:h.disabled.value),"var-custom-form-component--error":a(o)}])},[P("div",{class:"var-custom-form-component__container",onClick:k},[r(a(Ve),{class:"var-custom-form-component__icon",name:s.modelValue?"checkbox-marked-circle":"close-circle",transition:250},null,8,["name"]),O(U.$slots,"default",{},void 0,!0)]),r(a(Y),{"error-message":a(o),"extra-message":s.extraMessage},null,8,["error-message","extra-message"])],2)}}},Pe=N(Ie,[["__scopeId","data-v-235f566f"]]),Ne={example:"表单示例",username:"请输入用户名",usernameMessage:"用户名不能为空",password:"请输入密码",passwordMessage:"请输入密码",department:"请选择部门",departmentMessage:"必须选一个部门",eat:"吃饭",sleep:"睡觉",play:"打游戏",departmentUnit:"部",group:"请选择组织",groupMessage:"至少选择一个组织",groupUnit:"组",genderMessage:"必须选择一个性别",male:"男",female:"女",rateMessage:"必须大于2",likeMessage:"至少选择一个爱好",licenseMessage:"您必须开启",countMessage:"必须大于10",rangeMessage:"必须大于10",filesMessage:"至少上传一张图片",customFormComponent:"自定义表单组件",customLabel:"点我切换",customErrorMessage:"必须是对勾",customExtraMessage:"附加信息",controller:"表单控制",reset:"清空表单",resetValidation:"清空验证",validate:"触发验证",disabled:"表单禁用",readonly:"表单只读"},Be={example:"Form Example",username:"Please input username",usernameMessage:"The username cannot be empty",password:"Please input password",passwordMessage:"The password cannot be empty",department:"Please select department",departmentMessage:"The select cannot be empty",eat:"Eat",sleep:"Sleep",play:"Play game",departmentUnit:" department",group:"Please select group",groupMessage:"The select cannot be empty",groupUnit:" group",genderMessage:"The gender cannot be empty",male:"Male",female:"Female",rateMessage:"It has to be greater than 2",likeMessage:"The select cannot be empty",licenseMessage:"You must turn on",countMessage:"It has to be greater than 10",rangeMessage:"It has to be greater than 10",filesMessage:"Upload at least one picture",customFormComponent:"Custom Form Component",customLabel:"Click toggle",customErrorMessage:"Please check it",customExtraMessage:"Extra message",controller:"Form control",reset:"Empty form",resetValidation:"Empty the validation",validate:"Trigger validation",disabled:"Form disabled",readonly:"Form readonly"},{add:ae,use:Re,pack:t,packs:je,merge:Ge}=F.useLocale(),De=s=>{F.use(s),Re(s)};F.add("zh-CN",F.zhCN);F.add("en-US",F.enUS);ae("zh-CN",Ne);ae("en-US",Be);const ze=s=>(ce("data-v-f534cc41"),s=s(),ge(),s),Le=ze(()=>P("div",{class:"space"},null,-1)),Oe={__name:"index",setup(s){const l=de({username:"",password:"",department:"",gender:void 0,license:!1,range:0,count:0,group:[],score:0,like:[],files:[],custom:!1}),m=z(null),d=z(!1),_=z(!1);return ue(y=>{var o;De(y),(o=m.value)==null||o.reset()}),me(ie.dark),(y,o)=>{const T=p("var-input"),b=p("var-option"),M=p("var-select"),V=p("var-radio"),v=p("var-radio-group"),u=p("var-checkbox"),g=p("var-checkbox-group"),f=p("var-rate"),k=p("var-switch"),$=p("var-counter"),U=p("var-slider"),I=p("var-uploader"),h=p("var-space"),B=p("var-form"),w=p("var-button");return C(),x(pe,null,[r(a(L),null,{default:n(()=>[c(i(a(t).example),1)]),_:1}),r(B,{ref_key:"form",ref:m,disabled:d.value,readonly:_.value,"scroll-to-error":"start","scroll-to-error-offset-y":"14.4vmin"},{default:n(()=>[r(h,{direction:"column",size:["4vmin",0]},{default:n(()=>[r(T,{placeholder:a(t).username,rules:[e=>!!e||a(t).usernameMessage],modelValue:l.username,"onUpdate:modelValue":o[0]||(o[0]=e=>l.username=e)},null,8,["placeholder","rules","modelValue"]),r(T,{type:"password",placeholder:a(t).password,rules:[e=>!!e||a(t).passwordMessage],modelValue:l.password,"onUpdate:modelValue":o[1]||(o[1]=e=>l.password=e)},null,8,["placeholder","rules","modelValue"]),r(M,{placeholder:a(t).department,rules:[e=>!!e||a(t).departmentMessage],modelValue:l.department,"onUpdate:modelValue":o[2]||(o[2]=e=>l.department=e)},{default:n(()=>[r(b,{label:`${a(t).eat}${a(t).departmentUnit}`},null,8,["label"]),r(b,{label:`${a(t).sleep}${a(t).departmentUnit}`},null,8,["label"]),r(b,{label:`${a(t).play}${a(t).departmentUnit}`},null,8,["label"])]),_:1},8,["placeholder","rules","modelValue"]),r(M,{multiple:"",placeholder:a(t).group,rules:[e=>e.length>=1||a(t).groupMessage],modelValue:l.group,"onUpdate:modelValue":o[3]||(o[3]=e=>l.group=e)},{default:n(()=>[r(b,{label:`${a(t).eat}${a(t).groupUnit}`},null,8,["label"]),r(b,{label:`${a(t).sleep}${a(t).groupUnit}`},null,8,["label"]),r(b,{label:`${a(t).play}${a(t).groupUnit}`},null,8,["label"])]),_:1},8,["placeholder","rules","modelValue"]),r(v,{rules:[e=>!!e||a(t).genderMessage],modelValue:l.gender,"onUpdate:modelValue":o[4]||(o[4]=e=>l.gender=e)},{default:n(()=>[r(V,{"checked-value":1},{default:n(()=>[c(i(a(t).male),1)]),_:1}),r(V,{"checked-value":2},{default:n(()=>[c(i(a(t).female),1)]),_:1})]),_:1},8,["rules","modelValue"]),r(g,{rules:[e=>e.length>0||a(t).likeMessage],modelValue:l.like,"onUpdate:modelValue":o[5]||(o[5]=e=>l.like=e)},{default:n(()=>[r(u,{"checked-value":1},{default:n(()=>[c(i(a(t).eat),1)]),_:1}),r(u,{"checked-value":2},{default:n(()=>[c(i(a(t).sleep),1)]),_:1}),r(u,{"checked-value":3},{default:n(()=>[c(i(a(t).play),1)]),_:1})]),_:1},8,["rules","modelValue"]),r(f,{rules:[e=>e>=3||a(t).rateMessage],modelValue:l.score,"onUpdate:modelValue":o[6]||(o[6]=e=>l.score=e)},null,8,["rules","modelValue"]),r(k,{rules:[e=>!!e||a(t).licenseMessage],modelValue:l.license,"onUpdate:modelValue":o[7]||(o[7]=e=>l.license=e)},null,8,["rules","modelValue"]),r($,{rules:[e=>e>10||a(t).countMessage],modelValue:l.count,"onUpdate:modelValue":o[8]||(o[8]=e=>l.count=e)},null,8,["rules","modelValue"]),r(U,{rules:[e=>e>10||a(t).rangeMessage],modelValue:l.range,"onUpdate:modelValue":o[9]||(o[9]=e=>l.range=e)},null,8,["rules","modelValue"]),r(I,{rules:[e=>e.length>=1||a(t).filesMessage],modelValue:l.files,"onUpdate:modelValue":o[10]||(o[10]=e=>l.files=e)},null,8,["rules","modelValue"])]),_:1}),r(a(L),null,{default:n(()=>[c(i(a(t).customFormComponent),1)]),_:1}),r(a(Pe),{"extra-message":a(t).customExtraMessage,rules:[e=>!!e||a(t).customErrorMessage],modelValue:l.custom,"onUpdate:modelValue":o[11]||(o[11]=e=>l.custom=e)},{default:n(()=>[c(i(a(t).customLabel),1)]),_:1},8,["extra-message","rules","modelValue"])]),_:1},8,["disabled","readonly"]),r(a(L),null,{default:n(()=>[c(i(a(t).controller),1)]),_:1}),r(h,{direction:"column",size:["4vmin",0]},{default:n(()=>[r(w,{block:"",type:"danger",onClick:o[12]||(o[12]=e=>m.value.reset())},{default:n(()=>[c(i(a(t).reset),1)]),_:1}),r(w,{block:"",type:"warning",onClick:o[13]||(o[13]=e=>m.value.resetValidation())},{default:n(()=>[c(i(a(t).resetValidation),1)]),_:1}),r(w,{block:"",type:"success",onClick:o[14]||(o[14]=e=>m.value.validate())},{default:n(()=>[c(i(a(t).validate),1)]),_:1}),r(w,{block:"",type:"info",onClick:o[15]||(o[15]=e=>d.value=!d.value)},{default:n(()=>[c(i(a(t).disabled),1)]),_:1}),r(w,{block:"",type:"primary",onClick:o[16]||(o[16]=e=>_.value=!_.value)},{default:n(()=>[c(i(a(t).readonly),1)]),_:1})]),_:1}),Le],64)}}},He=N(Oe,[["__scopeId","data-v-f534cc41"]]);export{He as default};
